@using Shop.Web.Extension
@model Shop.Web.ViewModels.ProductDetailsViewModel

@if (Model != null)
{
    <div class="container-fluid">
        <div class="row spaced">
            <div class="container-fluid">
                <div class="col-md-2 product-details-img"> 
                    <img src="@Url.Content("~/Resources/Images/no-image-available-150.png")" />
                </div>
                <div class="col-md-8 product-details-info">
                    <div class="container-fluid">
                        <div class="form-group row">
                            <div class="col-md-3 inline-block">
                                @Html.LabelFor(model => model.Name)
                            </div>
                            <span>@Model.Name</span>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3 inline-block">
                                @Html.LabelFor(model => model.ID)
                            </div>
                            <span>@Model.ID</span>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3 inline-block">
                                @Html.LabelFor(model => model.Description)
                            </div>
                            <span>@Model.Description</span>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3 inline-block">
                                <label>Количество</label>
                            </div>
                            <input class="form-control inline-block small-number" type="number" value="0" id="txtCount" min="0" max="@Model.ItemsAvailable" />
                            <label>На складе: </label> <span>@Model.ItemsAvailable</span>
                        </div>
                        <div class="row">
                            <div class="container-fluid no-padding">
                                <button type="button" onclick="AddProductToBasket('@Model.ID');" class="btn btn-success">Добавить в корзину</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 container-fluid">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#1" data-toggle="tab">Основная информация</a>
                    </li>
                    <li>
                        <a href="#2" data-toggle="tab">Полные характеристики</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="1">
                        @Model.Description
                    </div>
                    <div class="tab-pane" id="2">
                        @{
                            var mdl = new Shop.Web.ViewModels.Categories.SpinningRodCategorySpecification();
                            @Html.CreateSpecification(mdl);
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            //$("#txtCount").
        });

        function AddProductToBasket(id)
        {
            var count = $("#txtCount").val();
            if (count <= 0) return;
            $.ajax({
                method: "GET",
                url: "@Url.Action("AjaxAddProduct", "Basket")?productId=" + id + "&count=" + count,
                success: function(data)
                {
                    console.log(data);
                }
            });
        }
    </script>    
}
else
{
    <span>Продукт не найден!</span>
}